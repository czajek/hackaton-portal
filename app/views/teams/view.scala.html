@(team: Option[model.Team], user: Option[securesocial.core.SocialUser])(implicit flash: Flash, request: Request[AnyContent])

@import helper._

@allowEdit = @{ !user.isEmpty && !team.isEmpty && (team.get.creatorId == user.get.hackathonUserId || user.get.isAdmin ) }

@main(Messages("teams.view.title"), user, nav = "teams") {

    <div class="container">
	
		<div class="content">
                
			<div class="page-header">
				@team.map { t =>
				<h2>@t.name</h2>
				}.getOrElse {
				<h2>@Messages("teams.notFound")</h2>				  
				}
    	   	</div>

			@tags.flashing("teams.status")

		    @team.map{ t =>
		    <div class="row">
		    	<div class="span12">
		    		<p>@Messages("teams.problem.label"): @t.problem.map { p => @p.name }.getOrElse{ @Messages("global.none") } </p>
		    		<p>@Messages("teams.hackathon.label"): @t.hackathon.subject</p>
		    		<p>@Messages("teams.creator.label"): @t.creator.name</p>

					@if(t.members.isEmpty) {
						<h3>@Messages("teams.noMembers")</h3>
					} else {  
						<h3>@Messages("teams.members.label") 
							<small>@Messages("global.total"): @t.members.size</small>
						</h3>
						<ul>
							@t.members.map { m =>
							<li>@m.name @if(allowEdit){ <a class="btn btn-warning" href="@routes.Team.disconnectUser(t.id, m.id)">@Messages("teams.disconnect")</a> }</li>
							}
						</ul>
						
					}
					
		   			<div class="form-actions">
		    			@form(routes.Team.delete(t.id)) {

		    			@if(!user.isEmpty && t.hasMember(user.get.hackathonUserId)){
		    			<a class="btn btn-warning" href="@routes.Team.disconnect(t.id)">@Messages("teams.disconnect")</a>		    			  
		    			} else {
		    			<a class="btn btn-warning" href="@routes.Team.join(t.id)">@Messages("teams.join")</a>  
		    			}
		    			
		    			@if(allowEdit){
		    			<a class="btn btn-success" href="@routes.Team.edit(t.id)">@Messages("global.edit")</a>
		   				<input type="submit" value="@Messages("global.delete")" class="btn btn-danger" />
		    			}
		    			
		    			}
		   			</div>
		    	</div>
		   	</div>
		    }

		</div>
	
	</div>
}

