@(hackathon: Option[model.Hackathon], team: Option[model.Team], user: Option[securesocial.core.SocialUser])(implicit flash: Flash, request: Request[AnyContent], lang: Lang)

@import helper._

@allowEdit = @{ !user.isEmpty && !team.isEmpty && (team.get.creatorId == user.get.hackathonUserId || team.get.hackathon.organiserId == user.get.hackathonUserId || user.get.isAdmin ) }

@hackathons.hackathonMain(hackathon, user, "teams", team.isDefined, "teams.status") {
	@team.map{ team =>
		<div class="page-header team" data-team-id="@team.id">
			<h2>@team.name @teamActions(hackathon.get, team, user, false)</h2>
		</div>
	  
		<div class="row">
			<div class="span12">
				<p>@Messages("teams.problem.label"): @team.problem.map { p => @p.name }.getOrElse{ @Messages("global.none") } </p>
		    	<p>@Messages("teams.creator.label"): @team.creator.name</p>

				@if(team.members.isEmpty) {
					<h3>@Messages("teams.noMembers")</h3>
				} else {  
					<h3>@Messages("teams.members.label") 
						<small>@Messages("global.total"): @team.members.size</small>
					</h3>
					<ul>
						@team.members.map { member =>
						<li>@member.name
							@if(allowEdit){ 
								<a class="btn btn-warning" href="@routes.Team.disconnectUser(hackathon.get.id, team.id, member.id)">@Messages("teams.remove.label")</a> 
							}
						</li>
						}
					</ul>
				}

	    	</div>
	   	</div>

		@if(user.isDefined && (team.hasMember(user.get.hackathonUserId) || team.creatorId == user.get.hackathonUserId)) {
		<div class="page-header">
			<h2>@Messages("teams.chat")</h2>
		</div>  
		<div class="content">
			@tags.chat(user, hackathon.get.id, Some(team.id))
		</div>
		}
	  
	}.getOrElse{
		<div class="page-header">
			<h2>@Messages("teams.notFound")</h2>
		</div>
	}
}