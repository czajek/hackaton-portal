@(news: Iterable[model.News], user: Option[securesocial.core.SocialUser])(implicit flash: Flash, request: Request[AnyContent])

@import helper._
@import tags._

@main(Messages("news.title"), user, nav = "news") {
    
    <div class="container">
    
    	<div class="row">
    	<div class="span9">
		    <div class="page-header">
		    	<h1>@Messages("news.title")</h1>
		    </div>
    
		@flash.get("status").map { status =>
			@flash.get("title").map { title =>
			   <div class="alert alert-success">
			   	<button type="button" class="close" data-dismiss="alert">×</button>
		       	<strong>@Messages("news.status." + status).format(title)</strong>
		       </div>
	       }.getOrElse {
	       		<div class="alert alert-success">
			   	<button type="button" class="close" data-dismiss="alert">×</button>
		       	<strong>@Messages("news.status." + status)</strong>
		       </div>
	       }
	    }

        @news.map { n =>
            <div class="page-header">
	    		<h2>@n.title</h2>
	    		<p>@Html(n.text.split("<!--more-->").head)...</p>
	    		<p>@n.author.head.name @n.published</p>
	    		<p>@Messages("news.labels") 
				@for(l <- n.labels.split(",")) {
				  <span class="label">@l</span>
				}
				</p>
	    		<p><a class="btn" href="@routes.News.view(n.id)">@Messages("global.readMore")</a></p>
    		</div>
        }

		@if(user) {                
	    	<div class="form-actions">
	    		<a class="btn btn-success" href="@routes.News.create">@Messages("news.addNews")</a>
	        </div>
        }
    	
		@footer()
    	
		</div>
	   
	    <div class="span3">
	    	@twitterStream()
	    </div>
    </div>
}

